import type { RiskLevel } from '../types';

export const DEFAULT_BALANCE = 200;

/**
 * Range of row counts the game supports.
 */
export const rowCountOptions = [8, 9, 10, 11, 12, 13, 14, 15, 16] as const;

/**
 * Exact bin odds (percentages) for each row count
 * Same odds apply to all risk levels (only payouts differ)
 */
export const binOdds: Record<RowCount, number[]> = {
  8: [0.3906, 3.125, 10.9375, 21.875, 27.3438, 21.875, 10.9375, 3.125, 0.3906],
  9: [0.1953, 1.7578, 7.0313, 16.4063, 24.6094, 24.6094, 16.4063, 7.0313, 1.7578, 0.1953],
  10: [0.0977, 0.9766, 4.3945, 11.7188, 20.5078, 24.6094, 20.5078, 11.7188, 4.3945, 0.9766, 0.0977],
  11: [0.0488, 0.5371, 2.6855, 8.0566, 16.1133, 22.6586, 22.6586, 16.1133, 8.0566, 2.6855, 0.5371, 0.0488],
  12: [0.0244, 0.293, 1.6113, 5.3711, 12.085, 19.3359, 22.6586, 19.3359, 12.085, 5.3711, 1.6113, 0.293, 0.0244],
  13: [0.0122, 0.1587, 0.9521, 3.4912, 8.728, 15.7104, 20.9473, 20.9473, 15.7104, 8.728, 3.4912, 0.9521, 0.1587, 0.0122],
  14: [0.0061, 0.0854, 0.5554, 2.2217, 6.1096, 12.2192, 18.3259, 20.9473, 18.3289, 12.2192, 6.1096, 2.2217, 0.5554, 0.0854, 0.0061],
  15: [0.0031, 0.0458, 0.3204, 1.3885, 4.1656, 9.1644, 15.274, 19.6381, 19.6381, 15.274, 9.1644, 4.1656, 1.3885, 0.3204, 0.0458, 0.0031],
  16: [0.0015, 0.0244, 0.1831, 0.8545, 2.7771, 6.665, 12.2192, 17.4561, 19.6381, 17.4561, 12.2192, 6.665, 2.7771, 0.8545, 0.1831, 0.0244, 0.0015],
};

/**
 * Number of rows of pins the game supports.
 */
export type RowCount = (typeof rowCountOptions)[number];

/**
 * Interval (in milliseconds) for placing auto bets.
 */
export const autoBetIntervalMs = 250;

/**
 * Color definitions for bins by row count
 * Gradient pattern: from center going left/right
 */
export const binColorsByRowCount: Record<RowCount, { background: string[]; shadow: string[] }> = {
  8: {
    // 9 bins: center at 4, gradient from center outward
    background: ['#660000', '#880000', '#bb0000', '#dd0000', '#ff0033', '#dd0000', '#bb0000', '#880000', '#660000'],
    shadow: ['#330000', '#440000', '#660000', '#880000', '#aa0000', '#880000', '#660000', '#440000', '#330000'],
  },
  9: {
    // 10 bins: center between 4-5, gradient from center outward
    background: ['#5c0000', '#770000', '#990000', '#bb0000', '#dd0000', '#dd0000', '#bb0000', '#990000', '#770000', '#5c0000'],
    shadow: ['#2e0000', '#3d0000', '#550000', '#660000', '#880000', '#880000', '#660000', '#550000', '#3d0000', '#2e0000'],
  },
  10: {
    // 11 bins: center at 5, gradient from center outward
    background: ['#550000', '#6e0000', '#880000', '#aa0000', '#cc0000', '#ff0033', '#cc0000', '#aa0000', '#880000', '#6e0000', '#550000'],
    shadow: ['#2a0000', '#370000', '#440000', '#550000', '#660000', '#aa0000', '#660000', '#550000', '#440000', '#370000', '#2a0000'],
  },
  11: {
    // 12 bins: center between 5-6, gradient from center outward
    background: ['#4d0000', '#660000', '#7f0000', '#990000', '#bb0000', '#dd0000', '#dd0000', '#bb0000', '#990000', '#7f0000', '#660000', '#4d0000'],
    shadow: ['#260000', '#330000', '#400000', '#4d0000', '#5c0000', '#880000', '#880000', '#5c0000', '#4d0000', '#400000', '#330000', '#260000'],
  },
  12: {
    // 13 bins: center at 6, gradient from center outward
    background: ['#460000', '#5c0000', '#730000', '#8a0000', '#aa0000', '#cc0000', '#ff0033', '#cc0000', '#aa0000', '#8a0000', '#730000', '#5c0000', '#460000'],
    shadow: ['#230000', '#2e0000', '#3d0000', '#450000', '#550000', '#660000', '#aa0000', '#660000', '#550000', '#450000', '#3d0000', '#2e0000', '#230000'],
  },
  13: {
    // 14 bins: center between 6-7, gradient from center outward
    background: ['#400000', '#550000', '#6a0000', '#7f0000', '#990000', '#bb0000', '#dd0000', '#dd0000', '#bb0000', '#990000', '#7f0000', '#6a0000', '#550000', '#400000'],
    shadow: ['#200000', '#2a0000', '#350000', '#400000', '#4d0000', '#5c0000', '#880000', '#880000', '#5c0000', '#4d0000', '#400000', '#350000', '#2a0000', '#200000'],
  },
  14: {
    // 15 bins: center at 7, gradient from center outward
    background: ['#3a0000', '#4d0000', '#610000', '#750000', '#880000', '#aa0000', '#cc0000', '#ff0033', '#cc0000', '#aa0000', '#880000', '#750000', '#610000', '#4d0000', '#3a0000'],
    shadow: ['#1d0000', '#270000', '#310000', '#3a0000', '#440000', '#550000', '#660000', '#aa0000', '#660000', '#550000', '#440000', '#3a0000', '#310000', '#270000', '#1d0000'],
  },
  15: {
    // 16 bins: center between 7-8, gradient from center outward
    background: ['#350000', '#470000', '#590000', '#6b0000', '#7d0000', '#8f0000', '#bb0000', '#dd0000', '#dd0000', '#bb0000', '#8f0000', '#7d0000', '#6b0000', '#590000', '#470000', '#350000'],
    shadow: ['#1a0000', '#240000', '#2e0000', '#360000', '#3f0000', '#480000', '#5c0000', '#880000', '#880000', '#5c0000', '#480000', '#3f0000', '#360000', '#2e0000', '#240000', '#1a0000'],
  },
  16: {
    // 17 bins: center at 8, gradient from center outward
    background: ['#300000', '#420000', '#540000', '#660000', '#780000', '#8a0000', '#9c0000', '#cc0000', '#ff0033', '#cc0000', '#9c0000', '#8a0000', '#780000', '#660000', '#540000', '#420000', '#300000'],
    shadow: ['#180000', '#210000', '#2a0000', '#330000', '#3c0000', '#450000', '#4e0000', '#660000', '#aa0000', '#660000', '#4e0000', '#450000', '#3c0000', '#330000', '#2a0000', '#210000', '#180000'],
  },
};

// Rarity of high multipliers is achieved through the paytable distribution

/**
 * Multipliers of each bin by row count and risk level.
 */
export const binPayouts: Record<RowCount, Record<RiskLevel, number[]>> = {
  8: {
    low: [5.6, 2.1, 1.1, 1, 0.5, 1, 1.1, 2.1, 5.6],
    medium: [13, 3, 1.3, 0.7, 0.4, 0.7, 1.3, 3, 13],
    high: [29, 4, 1.5, 0.3, 0.2, 0.3, 1.5, 4, 29],
  },
  9: {
    low: [5.6, 2, 1.6, 1, 0.7, 0.7, 1, 1.6, 2, 5.6],
    medium: [18, 4, 1.7, 0.9, 0.5, 0.5, 0.9, 1.7, 4, 18],
    high: [43, 7, 2, 0.6, 0.2, 0.2, 0.6, 2, 7, 43],
  },
  10: {
    low: [8.9, 3, 1.4, 1.1, 1, 0.5, 1, 1.1, 1.4, 3, 8.9],
    medium: [22, 5, 2, 1.4, 0.6, 0.4, 0.6, 1.4, 2, 5, 22],
    high: [76, 10, 3, 0.9, 0.3, 0.2, 0.3, 0.9, 3, 10, 76],
  },
  11: {
    low: [8.4, 3, 1.9, 1.3, 1, 0.7, 0.7, 1, 1.3, 1.9, 3, 8.4],
    medium: [24, 6, 3, 1.8, 0.7, 0.5, 0.5, 0.7, 1.8, 3, 6, 24],
    high: [120, 14, 5.2, 1.4, 0.4, 0.2, 0.2, 0.4, 1.4, 5.2, 14, 120],
  },
  12: {
    low: [10, 3, 1.6, 1.4, 1.1, 1, 0.5, 1, 1.1, 1.4, 1.6, 3, 10],
    medium: [33, 11, 4, 2, 1.1, 0.6, 0.3, 0.6, 1.1, 2, 4, 11, 33],
    high: [170, 24, 8.1, 2, 0.7, 0.2, 0.2, 0.2, 0.7, 2, 8.1, 24, 170],
  },
  13: {
    low: [8.1, 4, 3, 1.9, 1.2, 0.9, 0.7, 0.7, 0.9, 1.2, 1.9, 3, 4, 8.1],
    medium: [43, 13, 6, 3, 1.3, 0.7, 0.4, 0.4, 0.7, 1.3, 3, 6, 13, 43],
    high: [260, 37, 11, 4, 1, 0.2, 0.2, 0.2, 0.2, 1, 4, 11, 37, 260],
  },
  14: {
    low: [7.1, 4, 1.9, 1.4, 1.3, 1.1, 1, 0.5, 1, 1.1, 1.3, 1.4, 1.9, 4, 7.1],
    medium: [58, 15, 7, 4, 1.9, 1, 0.5, 0.2, 0.5, 1, 1.9, 4, 7, 15, 58],
    high: [420, 56, 18, 5, 1.9, 0.3, 0.2, 0.2, 0.2, 0.3, 1.9, 5, 18, 56, 420],
  },
  15: {
    low: [15, 8, 3, 2, 1.5, 1.1, 1, 0.7, 0.7, 1, 1.1, 1.5, 2, 3, 8, 15],
    medium: [88, 18, 11, 5, 3, 1.3, 0.5, 0.3, 0.3, 0.5, 1.3, 3, 5, 11, 18, 88],
    high: [620, 83, 27, 8, 3, 0.5, 0.2, 0.2, 0.2, 0.2, 0.5, 3, 8, 27, 83, 620],
  },
  16: {
    low: [16, 9, 2, 1.4, 1.4, 1.2, 1.1, 1, 0.5, 1, 1.1, 1.2, 1.4, 1.4, 2, 9, 16],
    medium: [110, 41, 10, 5, 3, 1.5, 1, 0.5, 0.3, 0.5, 1, 1.5, 3, 5, 10, 41, 110],
    high: [1000, 130, 26, 9, 4, 2, 0.2, 0.2, 0.2, 0.2, 0.2, 2, 4, 9, 26, 130, 1000],
  },
};
